<link rel="import" href="../particle-party.html">

<dom-module id="particle-party-demo">
  <template>
    <style>
      .particle-repeater{
          display: flex;
          align-items: center;
          justify-content: center;
      }
      particle-party{
            width: 40px;
            height: 40px;
            margin: 0;
            position: absolute;
            background-image: -moz-radial-gradient(45px 45px 45deg, circle cover, red 0%, orange 100%, red 95%);
        	background-image: -webkit-radial-gradient(45px 45px, circle cover, red, orange);
        	background-image: radial-gradient(45px 45px 45deg, circle cover, red 0%, orange 100%, red 95%);
        	border-radius: 50%;
            transition: all 900ms cubic-bezier(0.390, 0.575, 0.565, 1.000);
      }
      particle-party.burst{
          width: 0;
          height: 0;
          transition: none;
          animation: none;
      }
    </style>

    <div class="particle-repeater">
        <particle-party
            max-particle-size="30"
            particle-decay="0.04"
            gravity="0"
            initial-velocity="0"
            particle-speed="20"></particle-party>
    </div>

  </template>

  <script>
    Polymer({
        is: "particle-party-demo",
        listeners: {
            'tap': 'balloonBurst',
        },
        balloonBurst: function(e) {
            this.$$('particle-party').toggleClass('burst');
            //this.toggleClass('liked', this.like, this.$$('like-icon'));
            Polymer.dom(this.root).querySelector('particle-party').fire('fireAnimation');
            setTimeout(function(){
                this.$$('particle-party').toggleClass('burst');
            }.bind(this), 800);
        },
        // attached: function() {
        //     var childElement = Polymer.dom(this.root).querySelector('particle-party');
        //
        //     function playSequence(_this){
        //         childElement.setAttribute('number-particles', Math.floor(Math.random()*30)+6);
        //         //childElement.setAttribute('gravity', Math.random() * 0.4);
        //         //childElement.setAttribute('particle-decay', Math.random()*0.05 + 0.01);
        //         // childElement.setAttribute('number-particles', 30);
        //         // childElement.setAttribute('gravity', .2);
        //         // childElement.setAttribute('particle-decay', 0.01);
        //
        //         // setTimeout(function(){
        //         //     _this.$$('particle-party').toggleClass('burst');
        //         //     childElement.fire('fireAnimation');
        //         // }.bind(_this), 800);
        //         // setTimeout(function(){
        //         //     _this.$$('particle-party').toggleClass('burst');
        //         // }.bind(_this), 2000);
        //     };
        //     playSequence(this);
        //     setInterval(function(){
        //         playSequence(this);
        //     }.bind(this), 2000)
        // },
    });
  </script>
</dom-module>
